# Dynamic-Time-Warping

## 概要
go言語で動的時間伸縮法(Dynamic-Time-Warping)を実装しpython3から呼び出せるようにした．  
https://qiita.com/KaijiS/items/13ffda7f2490ed879e52

## Golangを用いてDTWを計算するプログラムについて

- `dtw1d.go` は2つのベクトルx,yのDTW距離を計算する  
`./dtw1d -Xrf [ベクトルxが格納されているcsv] -Yrf [ベクトルyが格納されているcsv] (ファイル出力する場合 :-wfp [出力ファイル名]) -d [距離の定義(今の所は"se"のみ実装されている)]`  
例)  
`./dtw1d -Xrf x.csv -Yrf y.csv -wfp dtw.csv -d se`

- `dtw2d.go` は2種類のベクトル群X,Y(それぞれ行がデータ,列が次元に対応する2次元配列)同士のDTW距離を計算する．ただし，計算するのは同じ行同士の距離である．つまりデータ数分のDTW距離が出力される(データ数次元のベクトル)．  
`./dtw2d -Xrf [ベクトル群Xが格納されているcsv] -Yrf [ベクトル群Yが格納されているcsv] (ファイル出力する場合 :-wfp [出力ファイル名]) -d [距離の定義(今の所は"se"のみ実装されている)]`  
例)  
`./dtw2d -Xrf X.csv -Yrf Y.csv -d se`

DTWは次元が揃っていなくても距離を計算することができる．
つまり，x,y は次元が異なっても大丈夫．X,Yも同様に次元が異なっても問題ない．  
出力ファイルを指定しない場合のみ標準出力する．

## python3からの呼び出し出力を得る
`main.py`を見るとわかると思うが`subprocess.run()`で実行ファイルを呼び出している．  
`python3 main.py`でこのまま実行すると実行ファイルからの標準出力を取り込むことでDTWの結果を得られる．一方，コメントアウトを入れ替え出力ファイル名を指定し実行ファイルを呼び出すと，上記の通り標準出力されずにcsvファイルとして出力される．その場合pythonでcsvファイルを読み込むことでDTWの結果を得られる．


`main.py`では例として乱数でベクトルを生成し実行している．
